<header class="site-header">
  <div class="site-header-wrapper">
    <h1>
      <a [routerLink]="HOME_ROUTE" mat-menu-item
        ><img src="../../assets/images/logo.png" alt="Bethany's Pie Shop Logo"
      /></a>
    </h1>
    <nav>
      <ul>
        <li routerLinkActive="active-link" ariaCurrentWhenActive="page">
          <button class="menu-item" mat-button [matMenuTriggerFor]="menu">
            Shop <span>&#8964;</span>
          </button>
          <mat-menu class="menu-dropdown" #menu="matMenu">
            <a
              [routerLink]="PRODUCTS_ROUTE"
              routerActiveLink="active-link"
              ariaCurrentWhenActive="page"
              mat-menu-item
              (click)="changeCategory('Seasonal Pies')"
            >
              Seasonal Pies
            </a>
            <a
              [routerLink]="PRODUCTS_ROUTE"
              routerActiveLink="active-link"
              ariaCurrentWhenActive="page"
              mat-menu-item
              (click)="changeCategory('Fruit Pies')"
            >
              Fruit Pies
            </a>
            <a
              [routerLink]="PRODUCTS_ROUTE"
              routerActiveLink="active-link"
              ariaCurrentWhenActive="page"
              mat-menu-item
              (click)="changeCategory('Cheesecakes')"
            >
              Cheesecakes
            </a>
            <a
              [routerLink]="PRODUCTS_ROUTE"
              routerActiveLink="active-link"
              ariaCurrentWhenActive="page"
              mat-menu-item
              (click)="changeCategory('All Pies')"
            >
              All Pies
            </a>
          </mat-menu>
        </li>
        <li>
          <a
            [routerLink]="CONTACT_ROUTE"
            routerActiveLink="active-link"
            ariaCurrentWhenActive="page"
            class="menu-item"
            mat-button
            >Contact</a
          >
        </li>
        <li>
          <a
            [routerLink]="ABOUT_ROUTE"
            routerActiveLink="active-link"
            ariaCurrentWhenActive="page"
            class="menu-item"
            mat-button
            >About</a
          >
        </li>
      </ul>
    </nav>
    <div class="header-icons">
      <ul>
        @let userId = this.authService.userId();
        <li>
          <a
            [routerLink]="LOGIN_ROUTE"
            routerActiveLink="active-link"
            ariaCurrentWhenActive="page"
            mat-menu-item
            class="user-icon"
          >
            @if(!userId){
            <span class="log-in">Log In</span>
            <img
              src="../../assets/images/user-icon.png"
              height="35"
              width="35"
              alt="user"
            />
            } @else { @let user = this.authService.authenticatedUser.value();
            <span class="log-out">Log Out {{ user?.name }}</span>
            <img
              src="../../assets/images/user-icon.png"
              height="35"
              width="35"
              alt="user"
            />
            }
          </a>
        </li>
        @let totalItems = this.cartService.cartTotals().totalCartCount;
        <li>
          <a
            [routerLink]="CART_ROUTE"
            routerActiveLink="active-link"
            ariaCurrentWhenActive="page"
            mat-menu-item
          >
            <span class="total-items">{{ totalItems }}</span>
            <img src="../../assets/images/cart-icon.png" alt="" />
          </a>
        </li>
      </ul>
    </div>
  </div>
</header>
